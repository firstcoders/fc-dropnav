/*! fc-dropnav 2016-08-15 Mark Cremer <mark@firstcoders.co.uk> */

"use strict";angular.module("fc-dropnav",[]).directive("fcDropnav",function($document,$rootScope,fcDropnavCtrl,$timeout){var body=angular.element($document[0].body);return{restrict:"EA",link:function($scope,element,attrs){element.addClass("fc-dropnav-navbar"),fcDropnavCtrl.onChange(function(isOpen){$timeout(function(){$scope.isOpen=isOpen}),isOpen?body.addClass("fc-dropnav-open"):body.removeClass("fc-dropnav-open")}),fcDropnavCtrl.set("open"===attrs.fcDropnavDefault),$rootScope.$broadcast("FC_DROPNAV_INIT",element)}}}),angular.module("fc-dropnav").directive("fcDropnavHandle",function(fcDropnavCtrl){return{restrict:"EA",link:function($scope,element){element.bind("click",function(){fcDropnavCtrl.toggle()})}}}),angular.module("fc-dropnav").directive("fcDropnavToggle",function($document,fcDropnavCtrl,$rootScope){return{restrict:"EA",scope:{keyCode:"=fcDropnavToggle",callback:"&fcDropnavOnToggle"},link:function($scope){var isKeyCovered=function(e){return e.which===$scope.keyCode&&-1===["INPUT","TEXTAREA"].indexOf(angular.element(e.srcElement)[0].tagName)},handleKeyDown=function(e){return isKeyCovered(e)&&32===e.which?(e.preventDefault(),!1):void 0},handleKeyUp=function(e){isKeyCovered(e)&&(fcDropnavCtrl.toggle(),$scope.callback&&$scope.callback(),$rootScope.$emit("dropnavOnToggle"))};$document.bind("keydown",handleKeyDown),$document.bind("keyup",handleKeyUp),$scope.$on("$destroy",function(){$document.off(handleKeyDown),$document.off(handleKeyUp)})}}}),angular.module("fc-dropnav").factory("fcDropnavCtrl",function(){var changeCallback,open=!1;return{toggle:function(){open=!open,changeCallback(open)},set:function(val){open=val,changeCallback&&changeCallback(open)},isOpen:function(){return open},onChange:function(closure){changeCallback=closure}}});
//# sourceMappingURL=fc-dropnav.min.js.map